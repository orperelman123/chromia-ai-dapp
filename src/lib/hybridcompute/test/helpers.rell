module;

import ^^.*;

operation submit_compute_request_op(id: text, type: text, input: gtv) {
    submit_compute_request(id, type, input);
}

operation request_taken_op(id: text, type: text, processed_by: byte_array) {
    request_taken_impl(id, type, processed_by);
}

operation response_op(id: text, type: text, input: gtv, output: gtv) {
    response_impl(id, type, input, output);
}

operation failure_op(id: text, type: text, input: gtv, error: text) {
    failure_impl(id, type, input, error);
}

object result {
    mutable id: text = "";
    mutable type: text = "";
    mutable error: text = "";
}

@extend(on_compute_result)
function (id: text, type: text, compute_result) {
    result.id = id;
    result.type = type;
    result.error = compute_result.error ?: "";
}
